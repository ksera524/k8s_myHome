# Harbor Kustomization
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - harbor-external-ingress.yaml
  - harbor-ext-endpoint-fix.yaml
  - harbor-config-cronjob.yaml

patches:
  # Deploymentパッチ - 環境変数で強制オーバーライド
  - path: harbor-deployment-patch.yaml
    target:
      kind: Deployment
      name: harbor-core
      namespace: harbor
  # ConfigMapパッチ - strategic mergeで適用
  - path: harbor-configmap-patch.yaml
    target:
      kind: ConfigMap
      name: harbor-core
      namespace: harbor